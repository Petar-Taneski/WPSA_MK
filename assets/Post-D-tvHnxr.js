import{j as e,u as i,R as v,a as h,e as N,r as o,g as y}from"./index-MBsqlzoc.js";import{C,a as k}from"./copy-UA24M2SF.js";const L=({title:t,imageUrl:a})=>e.jsx("div",{className:"relative mb-6 overflow-hidden md:mb-12",children:e.jsxs("div",{className:"relative flex flex-col md:flex-row",children:[e.jsx("div",{className:"w-full md:w-[40vw] z-10 md:absolute md:top-1/2 md:-translate-y-1/2 md:left-[calc(15%-10vw)] md:p-4",children:e.jsx("div",{className:"w-full p-0 pt-4 md:p-6 md:rounded-lg md:shadow-lg md:bg-black/50 md:backdrop-blur-sm",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800 md:text-4xl md:text-white",children:t})})}),e.jsx("div",{className:"w-full md:w-5/7 md:ml-auto h-[250px] md:h-[400px] overflow-hidden rounded-md order-first md:order-none",children:e.jsx("img",{src:a,alt:t,className:"object-cover w-full h-full"})})]})}),P=({author:t,publishDate:a,tags:s})=>{const{t:l}=i(),n=new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"flex flex-wrap gap-4 md:p-4 md:pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-gray-600",children:[l("post.author"),":"]})," ",t]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-gray-600",children:[l("post.published"),":"]})," ",n]}),s.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-gray-600",children:[l("post.tags"),":"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((c,r)=>e.jsx("span",{className:"px-2 py-1 text-sm bg-gray-100 rounded-md",children:c},r))})]})]})},D=({content:t})=>e.jsxs("div",{className:"md:px-4",children:[e.jsx("div",{className:"max-w-3xl prose prose-lg "}),e.jsx(v,{theme:"bubble",readOnly:!0,value:t,className:"px-4 custom-quill"})]}),E=()=>{const{t}=i();return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] w-full",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-primary-600 rounded-full animate-spin mb-4"}),e.jsx("p",{children:t("post.loading")})]})},T=({message:t})=>{const a=h(),{t:s}=i();return e.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 m-8 max-w-xl mx-auto rounded-lg bg-red-50 border border-red-100",children:[e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:s("post.errorTitle")}),e.jsx("p",{className:"mb-6 text-gray-700",children:t||s("post.errorDefault")}),e.jsx("button",{onClick:()=>a(-1),className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors",children:s("post.goBack")})]})},S=()=>{const t=N(),a=h(),{t:s,i18n:l}=i(),[n,c]=o.useState(!1),[r,f]=o.useState(null),[g,m]=o.useState(!0),[u,x]=o.useState(null),b=`${window.location.origin}${window.location.pathname}`,j=()=>{navigator.clipboard.writeText(b).then(()=>{c(!0),setTimeout(()=>{c(!1)},3e3)},p=>{console.error("Could not copy text: ",p)})},w=()=>{switch(l.language){case"mk":return"/mk/вести";case"en":default:return"/en/news"}};return o.useEffect(()=>{t.id?(async()=>{try{m(!0);const d=await y(t.id);d?f(d):x(s("post.notFound"))}catch(d){x(s("post.loadError")),console.error(d)}finally{m(!1)}})():(x(s("post.noIdProvided")),m(!1))},[t.id,s]),g?e.jsx(E,{}):u||!r?e.jsx(T,{message:u||s("post.notFound")}):e.jsxs("div",{className:"px-4 py-8 mx-auto max-w-7xl",children:[e.jsx(L,{title:r.title,imageUrl:r.imageUrl}),e.jsx("div",{className:"mb-4 md:p-4 md:pb-4 md:mb-8 md:border-b md:border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-grow",children:e.jsx(P,{author:r.author,publishDate:r.publishDate,tags:r.tags})}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:j,className:"flex items-center justify-center px-3 py-1.5 text-sm border border-primary-600 rounded-md hover:bg-primary-600/10 transition-colors","aria-label":n?"URL copied":"Copy article URL",children:n?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),s("common.copied","Copied!")]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),s("common.copyLink","Copy Link")]})})})]})}),e.jsx(D,{content:r.content}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx("button",{onClick:()=>a(w()),className:"px-6 py-3 font-medium text-white transition-colors rounded-lg shadow-sm bg-primary-600 hover:bg-primary-700",children:s("post.backToNews")})})]})};export{S as default};
