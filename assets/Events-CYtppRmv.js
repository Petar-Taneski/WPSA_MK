import{c as C,a as L,u as g,j as e,r as n,d as T}from"./index-MBsqlzoc.js";import{C as k,M as S,A as U,s as j,g as M,a as $,E as A,e as E}from"./EventCarousel-rnh-fPoT.js";import{E as F,L as I}from"./EmptyState-BBiMCXYw.js";import{C as _,a as z}from"./copy-UA24M2SF.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],q=C("Award",B);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],H=C("Clock",G),J=({events:l,onEventClick:r})=>{const t=L(),{i18n:a}=g(),d=s=>new Date(s).toLocaleDateString(a.language,{year:"numeric",month:"long",day:"numeric"}),o=s=>{r?r(s):t(`/events?event=${encodeURIComponent(s.title)}`)};return e.jsx("div",{className:"space-y-6",children:l.map(s=>e.jsx("div",{className:"group shadow-md rounded-sm overflow-hidden py-0 transition-all duration-300 hover:shadow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row h-fit sm:h-[220px]",children:[e.jsxs("div",{className:"sm:w-1/3 h-48 sm:h-full relative",children:[e.jsx("img",{src:s.thumbnailUrl||s.imageUrl||"/placeholder.jpg",alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-0 right-0 bg-primary/90 text-white px-3 py-1 m-3 rounded text-sm font-medium",children:d(s.eventDate)}),s.isFeatured&&e.jsx("div",{className:"absolute top-0 left-0 bg-yellow-500 text-white px-3 py-1 m-3 rounded text-xs font-medium transform -rotate-12",children:"Featured"})]}),e.jsxs("div",{className:"sm:w-2/3 p-5 flex flex-col",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2 text-gray-800 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),d(s.eventDate)]}),s.location&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),s.location]})]}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3 flex-grow",children:s.summary}),e.jsx("div",{className:"flex justify-end items-center mt-auto",children:e.jsx(U,{text:s.callToAction||"Learn More",onClick:()=>o(s),className:"text-sm"})})]})]})},s.id))})},K=({events:l,onEventClick:r})=>{const{t}=g(),[a,d]=n.useState("all"),o=j(M(l)),s=j($(l)),x=a==="all"?j(l):a==="upcoming"?o:s;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8 sm:justify-start",children:[e.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium transition ${a==="all"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>d("all"),children:t("events.filterAll")}),e.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium transition ${a==="upcoming"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>d("upcoming"),children:t("events.filterUpcoming")}),e.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium transition ${a==="past"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>d("past"),children:t("events.filterPast")})]}),x.length===0?e.jsx(F,{}):e.jsx(J,{events:x,onEventClick:r})]})},O=({isOpen:l,onClose:r,event:t})=>{const{t:a,i18n:d}=g(),o=n.useRef(null),[s,x]=n.useState(!1),f=t?`${window.location.origin}/${d.language}/events/${t.id}`:"",y=()=>{navigator.clipboard.writeText(f).then(()=>{x(!0),setTimeout(()=>{x(!1)},3e3)},c=>{console.error("Could not copy text: ",c)})},h=c=>new Date(c).toLocaleDateString(d.language,{year:"numeric",month:"long",day:"numeric"});n.useEffect(()=>{if(l){const c=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=c}}},[l]),n.useEffect(()=>{l||x(!1)},[l]);const v=c=>{o.current&&!o.current.contains(c.target)&&r()};return!l||!t?null:e.jsx("div",{className:"fixed inset-0 z-[1001] flex items-center justify-center bg-gray-800/50 overflow-y-auto p-4",onClick:v,"aria-modal":"true",role:"dialog",children:e.jsxs("div",{ref:o,className:"bg-white rounded-lg shadow-xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto z-[1002] relative my-8",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"pr-8 text-xl font-bold text-gray-800/85",children:t.title}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700","aria-label":a("common.close"),children:"âœ•"})]}),e.jsxs("div",{className:"w-full text-gray-800/85",children:[t.isFeatured&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium text-yellow-800 bg-yellow-100 rounded-full",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Featured Event"]})}),e.jsx("div",{className:"w-full h-64 mb-6 overflow-hidden rounded-md",children:e.jsx("img",{src:t.imageUrl||"/placeholder.jpg",alt:t.title,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(k,{className:"w-5 h-5 mr-2 text-primary"}),e.jsx("span",{children:h(t.eventDate)})]}),t.location&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(S,{className:"w-5 h-5 mr-2 text-primary"}),e.jsx("span",{children:t.location})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(H,{className:"w-5 h-5 mr-2 text-primary"}),e.jsxs("span",{children:["Published: ",h(t.publishDate)]})]})]}),e.jsx("div",{className:"my-4",children:e.jsx("button",{onClick:y,className:"flex items-center justify-center px-3 py-1.5 text-sm border border-primary rounded-md hover:bg-primary/10 transition-colors","aria-label":s?"URL copied":"Copy event URL",children:s?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),a("common.copied","Copied!")]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),a("common.copyLink","Copy Link")]})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-700",children:"Summary"}),e.jsx("p",{className:"text-gray-700",children:t.summary})]}),e.jsxs("div",{className:"mb-8 prose-sm prose max-w-none",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-700",children:"Details"}),e.jsx("div",{className:"markdown-content",children:t.content})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx(U,{text:t.callToAction||a("events.applyNow"),onClick:()=>{window.open("/","_blank"),r()},className:"px-6 py-2"})})]})]})})},Q=()=>{const{t:l}=g(),[r,t]=n.useState(!0),[a,d]=n.useState(null),[o,s]=n.useState([]),[x,f]=n.useState(null),[y,h]=n.useState(!1),[v,c]=n.useState(!1),w=L(),u=T();n.useEffect(()=>{const i=new URLSearchParams(u.search).get("event");c(!!(i&&r))},[u.search,r]);const R=m=>o.find(i=>i.title.toLowerCase()===decodeURIComponent(m).toLowerCase());n.useEffect(()=>{if(o.length>0){const i=new URLSearchParams(u.search).get("event");if(i){const p=R(i);p&&(f(p),h(!0))}}},[u.search,o]);const b=m=>{f(m),h(!0);const i=new URLSearchParams(u.search);i.set("event",encodeURIComponent(m.title)),w({search:i.toString()},{replace:!0})},D=()=>{h(!1),f(null);const m=new URLSearchParams(u.search);m.delete("event"),w({search:m.toString()},{replace:!0})};return n.useEffect(()=>{(async()=>{try{setTimeout(()=>{s(E),t(!1);const p=new URLSearchParams(u.search).get("event");if(p){const N=E.find(P=>P.title.toLowerCase()===decodeURIComponent(p).toLowerCase());N&&(f(N),h(!0))}},800)}catch(i){console.error("Error fetching events:",i),d("Error loading events. Please try again later."),t(!1)}})()},[u.search]),e.jsxs("div",{className:"events-page",children:[e.jsx(A,{onEventClick:b}),e.jsx("div",{className:"bg-slate-50 py-12",children:e.jsxs("div",{className:"w-full lg:px-20 sm:px-10 px-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800/90 mb-8",children:l("events.allEvents")}),r&&e.jsx(I,{}),a&&!r&&e.jsx("div",{className:"bg-red-50 p-4 rounded-md border border-red-200 text-red-700",children:a}),!r&&!a&&e.jsx(K,{events:o,onEventClick:b})]})}),e.jsx(O,{isOpen:y,onClose:D,event:x}),v&&e.jsx("div",{className:"fixed inset-0 z-[1002] flex items-center justify-center bg-gray-800/50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium",children:l("events.loadingEvent")})]})})]})},Z=()=>e.jsx("div",{className:"page events-page",children:e.jsx(Q,{})});export{Z as default};
